@page
@model AI4ALL.Pages.Contact.IndexModel
@using AI4ALL.Services
@{
    var lang = Model.CurrentLanguage;
    Layout = "_Layout";
}

<section class="fade-in">
    <h1 class="orbitron">@LocalizationService.GetText("ContactTitle", lang)</h1>

    <div id="map" style="height: 300px; border-radius: 8px; margin-bottom: 20px;"></div>

    <p>
        <strong>@LocalizationService.GetText("ContactEmail", lang):</strong>
        <a href="mailto:info@eif.am">info@eif.am</a><br />
        <strong>@LocalizationService.GetText("ContactPhone", lang):</strong>
        +374-11-21-97-97
    </p>

    <form id="contactForm" class="mb-4">
        <div class="form-group mb-2">
            <input asp-for="Contact.Name" class="form-control"
                   placeholder="@LocalizationService.GetText("ContactFormName", lang)" required />
        </div>
        <div class="form-group mb-2">
            <input asp-for="Contact.Email" class="form-control"
                   placeholder="@LocalizationService.GetText("ContactFormEmail", lang)" required />
        </div>
        <div class="form-group mb-3">
            <textarea asp-for="Contact.Message" class="form-control" rows="4"
                      placeholder="@LocalizationService.GetText("ContactFormMessage", lang)" required></textarea>
        </div>
        <button type="submit" class="btn btn-gradient px-4">
            @LocalizationService.GetText("ContactFormSend", lang)
        </button>
    </form>

    <!-- Hidden confirmation, shown on submit -->
    <div id="confirmationMessage" class="alert alert-success d-none">
        @LocalizationService.GetText("ContactFormSuccess", lang)
    </div>

    <section class="social-section fade-in delay-2 text-center">
        <h2 class="orbitron mb-3">@LocalizationService.GetText("ContactFollowTitle", lang)</h2>
        <div class="social-icons d-inline-flex">
            <a href="https://www.facebook.com/AI4ALLbyEIF" target="_blank">
                <img src="~/img/facebook.png" alt="Facebook" class="social-icon floating mx-2" />
            </a>
            <a href="https://www.instagram.com/ai4allbyeif/" target="_blank">
                <img src="~/img/instagram.png" alt="Instagram" class="social-icon floating mx-2" />
            </a>
        </div>
    </section>
</section>

@section Scripts {
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Map initialization
        var map = L.map('map').setView([40.2031324, 44.5778011], 17);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);
        L.marker([40.2031324, 44.5778011]).addTo(map)
         .bindPopup('EIF Office').openPopup();

        // Intercept form submit and show confirmation instead
        document.addEventListener('DOMContentLoaded', function () {
            var form = document.getElementById('contactForm');
            var confirmation = document.getElementById('confirmationMessage');

            form.addEventListener('submit', function (e) {
                e.preventDefault();               // prevent actual submission
                confirmation.classList.remove('d-none'); // show success message
                form.reset();                    // optional: clear the form
            });
        });
    </script>
}
